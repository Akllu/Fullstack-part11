(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{70:function(e,n,t){"use strict";t.r(n);var r,c,a=t(22),i=t.n(a),s=t(8),o=t(14),u=t(17),l=Object(u.b)({name:"notification",initialState:null,reducers:{setNotification:function(e,n){return null===n.payload?null:{message:n.payload.message,type:n.payload.type}}}}),d=l.actions.setNotification,b=null,j=function(e,n){return function(t){t(d(e)),b&&clearTimeout(b),n=void 0===n?5:n,b=setTimeout((function(){t(d(null))}),1e3*n)}},p=l.reducer,O=t(6),f=t(12),x=t(5),h=t(15),g=t.n(h),m="/api/blogs",v=null,y=function(){var e=Object(f.a)(Object(O.a)().mark((function e(n){var t,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:v}},e.next=3,g.a.post(m,n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(Object(O.a)().mark((function e(n){var t,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:v}},e.next=3,g.a.put("".concat(m,"/").concat(n.id),n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(Object(O.a)().mark((function e(n){var t,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:v}},e.next=3,g.a.delete("".concat(m,"/").concat(n),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),z={getAll:function(){return g.a.get(m).then((function(e){return e.data}))},create:y,update:k,remove:w,setToken:function(e){v="Bearer ".concat(e)}},S=Object(u.b)({name:"blogs",initialState:[],reducers:{setBlogs:function(e,n){return n.payload.sort((function(e,n){return e.likes<n.likes?1:-1}))},addBlog:function(e,n){e.push(n.payload)},addLike:function(e,n){var t=n.payload.id,r=e.find((function(e){return e.id===t})),c=Object(x.a)(Object(x.a)({},r),{},{likes:r.likes+1});return e.map((function(e){return e.id!==t?e:c}))},deleteBlog:function(e,n){return e.filter((function(e){return e.id!==n.payload.id}))}}}),L=S.actions,F=L.setBlogs,A=L.addBlog,B=L.addLike,C=L.deleteBlog,U=S.reducer,T=function(){var e=Object(f.a)(Object(O.a)().mark((function e(n){var t;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E={login:T},N=Object(u.b)({name:"user",initialState:null,reducers:{setUser:function(e,n){return n.payload}}}),R=N.actions.setUser,I=N.reducer,J=Object(u.a)({reducer:{notification:p,blogs:U,user:I}}),D=t(10),V=t(3),W=t(0),G=t(4),H=t(2),P=function(e){var n=Object(W.useState)(""),t=Object(D.a)(n,2),r=t[0],c=t[1];return{input:{type:e,value:r,onChange:function(e){c(e.target.value)}},resetField:function(){c("")}}},Y=t(1),q=function(e){var n=e.toggle,t=P("title"),r=P("author"),c=P("url"),a=P("likes"),i=Object(s.b)();return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h2",{children:"Create a new blog"}),Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s,o={title:t.input.value,author:r.input.value,url:c.input.value,likes:a.input.value};i((s=o,function(){var e=Object(f.a)(Object(O.a)().mark((function e(n){var t;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.create(s);case 2:t=e.sent,n(A(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())),i(j({message:"A new blog ".concat(t.input.value," by ").concat(r.input.value," added!"),type:"success"})),n(),t.resetField(),r.resetField(),c.resetField(),a.resetField()},children:[Object(Y.jsxs)("div",{children:["Title:",Object(Y.jsx)("input",Object(x.a)(Object(x.a)({},t.input),{},{placeholder:"Enter a title"}))]}),Object(Y.jsxs)("div",{children:["Author:",Object(Y.jsx)("input",Object(x.a)(Object(x.a)({},r.input),{},{placeholder:"Enter a author"}))]}),Object(Y.jsxs)("div",{children:["URL:",Object(Y.jsx)("input",Object(x.a)(Object(x.a)({},c.input),{},{placeholder:"Enter a URL"}))]}),Object(Y.jsxs)("div",{children:["Likes:",Object(Y.jsx)("input",Object(x.a)(Object(x.a)({},a.input),{},{placeholder:"Enter likes",type:"number"}))]}),Object(Y.jsx)("button",{type:"submit",children:"Submit"})]})]})},K=G.a.div(r||(r=Object(V.a)(["\n  display: flex;\n  justify-content: center;\n"]))),M=G.a.button(c||(c=Object(V.a)(["\n  border-radius: 50px;\n  background: rgb(0, 0, 0);\n  padding: 10px 22px;\n  color: white;\n  font-size: 15px;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  margin: 15px;\n\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: white;\n    color: black;\n  }\n"]))),Q=Object(W.forwardRef)((function(e,n){var t=Object(W.useState)(!1),r=Object(D.a)(t,2),c=r[0],a=r[1],i={display:c?"none":""},s={display:c?"":"none"},o=function(){a(!c)};return Object(W.useImperativeHandle)(n,(function(){return{toggleVisibility:o}})),Object(Y.jsxs)(K,{children:[Object(Y.jsx)("div",{style:i,children:Object(Y.jsx)(M,{onClick:o,children:e.buttonLabel})}),Object(Y.jsxs)("div",{style:s,children:[e.children,Object(Y.jsx)(M,{onClick:o,children:"Cancel"})]})]})}));Q.displayName="Togglable";var X,Z,$,_,ee,ne,te,re,ce,ae,ie,se,oe,ue,le,de,be,je,pe,Oe,fe,xe,he=Q,ge=G.a.h1(X||(X=Object(V.a)(["\n  text-align: center;\n"]))),me=Object(G.a)(o.b)(Z||(Z=Object(V.a)(["\n  display: flex;\n  align-self: center;\n  color: black;\n  text-decoration: none;\n  font-size: 24px;\n\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    text-decoration: underline;\n  }\n"]))),ve=function(){var e=Object(W.useRef)(),n=Object(s.c)((function(e){return e.blogs}));return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(ge,{children:"Blogs"}),Object(Y.jsx)(he,{buttonLabel:"Create a new blog",ref:e,children:Object(Y.jsx)(q,{toggle:function(){return e.current.toggleVisibility()}})}),n.map((function(e){return Object(Y.jsx)(me,{to:"/blogs/".concat(e.id),children:e.title},e.id)}))]})},ye=G.a.h1($||($=Object(V.a)(["\n  text-align: center;\n"]))),ke=G.a.table(_||(_=Object(V.a)(["\n  color: black;\n  text-align: center;\n  font-size: 24px;\n"]))),we=Object(G.a)(o.b)(ee||(ee=Object(V.a)(["\n  color: black;\n  text-decoration: none;\n\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    text-decoration: underline;\n  }\n"]))),ze=G.a.div(ne||(ne=Object(V.a)(["\n  text-align: center;\n  font-size: 30px;\n"]))),Se=function(e){var n=e.users;return Object(Y.jsx)(Y.Fragment,{children:null===n?Object(Y.jsx)(ze,{children:"Loading..."}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(ye,{children:"Users"}),Object(Y.jsx)(ke,{children:Object(Y.jsxs)("tbody",{children:[Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("td",{}),Object(Y.jsx)("td",{children:Object(Y.jsx)("b",{children:"blogs created"})})]}),n.map((function(e){return Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("td",{children:Object(Y.jsx)(we,{to:"/users/".concat(e.id),children:e.name})}),Object(Y.jsx)("td",{children:e.blogs.length})]},e.id)}))]})})]})})},Le=G.a.h1(te||(te=Object(V.a)(["\n  text-align: center;\n"]))),Fe=G.a.h3(re||(re=Object(V.a)(["\n  text-align: center;\n"]))),Ae=G.a.ul(ce||(ce=Object(V.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),Be=function(e){var n=e.users;if(!n)return null;var t=Object(H.f)("/users/:id"),r=t?n.find((function(e){return e.id===t.params.id})):null;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(Le,{children:r.name}),Object(Y.jsx)(Fe,{children:"Added blogs"}),Object(Y.jsx)(Ae,{children:r.blogs.map((function(e){return Object(Y.jsx)("li",{children:e.title},e.id)}))})]})},Ce=G.a.div(ae||(ae=Object(V.a)(["\n  font-size: 18px;\n  background-color: lightgray;\n  color: green;\n  border: 3px solid green;\n  border-radius: 10px;\n  padding: 10px;\n"]))),Ue=G.a.div(ie||(ie=Object(V.a)(["\n  font-size: 18px;\n  background-color: lightgray;\n  color: red;\n  border: 3px solid red;\n  border-radius: 10px;\n  padding: 10px;\n"]))),Te=function(){var e=Object(s.c)((function(e){return e.notification}));return null===e?null:"success"===e.type?Object(Y.jsx)(Ce,{children:e.message}):Object(Y.jsx)(Ue,{className:"error",children:e.message})},Ee=function(){var e=P("username"),n=P("password"),t=Object(s.b)();return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h2",{children:"Login"}),Object(Y.jsxs)("form",{onSubmit:function(r){r.preventDefault(),t(function(e,n){return function(){var t=Object(f.a)(Object(O.a)().mark((function t(r){var c;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.login({username:e,password:n});case 3:c=t.sent,window.localStorage.setItem("loggedUser",JSON.stringify(c)),z.setToken(c.token),r(R(c)),r(j({message:"Welcome ".concat(c.name,"!"),type:"success"})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),r(j({message:"Wrong username or password!",type:"error"}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(e.input.value,n.input.value)),e.resetField(),n.resetField()},children:[Object(Y.jsxs)("div",{children:["Username",Object(Y.jsx)("input",Object(x.a)({id:"username-input"},e.input))]}),Object(Y.jsxs)("div",{children:["Password",Object(Y.jsx)("input",Object(x.a)({id:"password-input"},n.input))]}),Object(Y.jsx)("button",{id:"login-button",type:"submit",children:"Login"})]})]})},Ne=G.a.div(se||(se=Object(V.a)(["\n  display: flex;\n  position: sticky;\n  background: rgb(123, 247, 159);\n  height: 80px;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 16px;\n  top: 0;\n  z-index: 1;\n"]))),Re=G.a.div(oe||(oe=Object(V.a)(["\n  display: flex;\n  margin-left: 15px;\n"]))),Ie=Object(G.a)(o.b)(ue||(ue=Object(V.a)(["\n  display: flex;\n  color: rgb(35, 35, 35);\n  align-items: center;\n  padding: 0 16px;\n  cursor: pointer;\n  font-family: Verdana, Geneva, sans-serif;\n  letter-spacing: 1px;\n  font-variant: small-caps;\n  font-style: italic;\n\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    color: black;\n    font-size: 120%;\n  }\n"]))),Je=G.a.div(le||(le=Object(V.a)(["\n  padding: 10px;\n"]))),De=G.a.button(de||(de=Object(V.a)(["\n  border-radius: 50px;\n  background: rgb(0, 0, 0);\n  padding: 10px 22px;\n  color: white;\n  font-size: 15px;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  margin-left: 15px;\n\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: white;\n    color: black;\n  }\n"]))),Ve=function(){var e=Object(s.b)(),n=Object(s.c)((function(e){return e.user}));return Object(Y.jsxs)(Ne,{children:[Object(Y.jsxs)(Re,{children:[Object(Y.jsx)(Ie,{to:"/blogs",children:"Blogs"}),Object(Y.jsx)(Ie,{to:"/users",children:"Users"})]}),Object(Y.jsxs)(Je,{children:[n.name," logged in",Object(Y.jsx)(De,{onClick:function(){return e((function(e){window.localStorage.removeItem("loggedUser"),z.setToken(null),e(j({message:"You logged out!",type:"success"})),e(R(null))}))},children:"Logout"})]})]})},We=G.a.div(be||(be=Object(V.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 20px;\n"]))),Ge=G.a.a(je||(je=Object(V.a)([""]))),He=G.a.div(pe||(pe=Object(V.a)(["\n  padding: 10px;\n"]))),Pe=G.a.button(Oe||(Oe=Object(V.a)(["\n  background: rgb(20, 142, 240);\n  border-radius: 5;\n  margin-left: 15px;\n  padding: 5px 15px;\n  border-radius: 10px;\n  font-size: 16px;\n  cursor: pointer;\n"]))),Ye=G.a.button(fe||(fe=Object(V.a)(["\n  background: rgb(220, 42, 20);\n  border-radius: 5;\n  margin-top: 15px;\n  padding: 5px 15px;\n  border-radius: 10px;\n  font-size: 16px;\n  cursor: pointer;\n"]))),qe=function(){var e=Object(s.b)(),n=Object(s.c)((function(e){return e.user})),t=Object(s.c)((function(e){return e.blogs})),r=P("comment"),c=Object(H.f)("/blogs/:id"),a=c?t.find((function(e){return e.id===c.params.id})):null;if(!a)return null;var i=function(n){var t=Object(x.a)(Object(x.a)({},n),{},{likes:n.likes+1,user:n.user.id});e(function(e){return function(){var n=Object(f.a)(Object(O.a)().mark((function n(t){var r;return Object(O.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.update(e);case 2:r=n.sent,t(B(r));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t))},o=function(n){window.confirm("Remove blog ".concat(n.title," by ").concat(n.author,"?"))&&e(function(e){return function(){var n=Object(f.a)(Object(O.a)().mark((function n(t){var r;return Object(O.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.remove(e.id);case 2:r=n.sent,t(C(r));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n))};return Object(Y.jsxs)(We,{children:[Object(Y.jsx)("h1",{children:a.title}),Object(Y.jsx)(Ge,{href:a.url,children:a.url}),Object(Y.jsxs)(He,{children:["Likes ",a.likes,Object(Y.jsx)(Pe,{onClick:function(){return i(a)},children:"Like"})]}),"Added by ".concat(a.author),a.user.username===n.username&&Object(Y.jsx)(Ye,{onClick:function(){return o(a)},children:"Remove"}),Object(Y.jsx)("h3",{children:"Comments"}),Object(Y.jsxs)("form",{onSubmit:function(n){n.preventDefault(),g.a.post("/api/blogs/".concat(a.id,"/comments"),{comment:r.input.value}).then((function(n){e(F(t.map((function(e){return e.id!==a.id?e:n.data}))))})).catch((function(e){return console.error(e)})),r.resetField()},children:[Object(Y.jsx)("div",{children:Object(Y.jsx)("input",Object(x.a)(Object(x.a)({},r.input),{},{placeholder:"Leave a comment"}))}),Object(Y.jsx)("button",{type:"submit",children:"Add comment"})]}),Object(Y.jsx)("ul",{children:a.comments.map((function(e,n){return Object(Y.jsx)("li",{children:e},n)}))})]})},Ke=G.a.div(xe||(xe=Object(V.a)(["\n  display: flex;\n  flex-direction: column;\n  background: rgb(46, 213, 115);\n  height: 100vh;\n"]))),Me=function(){var e=Object(W.useState)(null),n=Object(D.a)(e,2),t=n[0],r=n[1],c=Object(s.b)(),a=Object(s.c)((function(e){return e.user}));return Object(W.useEffect)((function(){c(function(){var e=Object(f.a)(Object(O.a)().mark((function e(n){var t;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.getAll();case 2:t=e.sent,n(F(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[c]),Object(W.useEffect)((function(){g.a.get("/api/users").then((function(e){return r(e.data)}));var e=window.localStorage.getItem("loggedUser");if(e){var n=JSON.parse(e);z.setToken(n.token),c(R(n))}}),[]),Object(Y.jsxs)(Ke,{children:[Object(Y.jsx)(Te,{}),null===a?Object(Y.jsx)(Ee,{}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(Ve,{}),Object(Y.jsxs)(H.c,{children:[Object(Y.jsx)(H.a,{path:"/",element:Object(Y.jsx)("div",{})}),Object(Y.jsx)(H.a,{path:"/blogs",element:Object(Y.jsx)(ve,{})}),Object(Y.jsx)(H.a,{path:"/blogs/:id",element:Object(Y.jsx)(qe,{})}),Object(Y.jsx)(H.a,{path:"/users",element:Object(Y.jsx)(Se,{users:t})}),Object(Y.jsx)(H.a,{path:"/users/:id",element:Object(Y.jsx)(Be,{users:t})})]})]})]})};i.a.render(Object(Y.jsx)(s.a,{store:J,children:Object(Y.jsx)(o.a,{children:Object(Y.jsx)(Me,{})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.d8012f2e.chunk.js.map